# é€šè¿‡è·³æ¿æœºè¿æ¥æœåŠ¡å™¨æŒ‡å—

## ğŸ“‹ ä½ çš„ç½‘ç»œç¯å¢ƒ

```
ä½ çš„ç”µè„‘
  â†“ EasyConnect VPN
  â†“ è™šæ‹Ÿ IP: 10.184.65.54
  â†“
è·³æ¿æœº (z135)
  - Host: 10.181.9.135
  - User: zhaoyk
  - Port: 22
  - SSH Key: C:\Users\nyodo\.ssh\id_rsa_zhaoyk
  â†“
ç›®æ ‡æœåŠ¡å™¨
  - Host: 10.181.142.180
  - User: ls
  - Port: 1022
  - Password: camel
```

## ğŸ¯ è§£å†³æ–¹æ¡ˆï¼šSSH éš§é“ç«¯å£è½¬å‘

é€šè¿‡ SSH éš§é“ï¼Œå°†è¿œç¨‹æœåŠ¡å™¨çš„ç«¯å£æ˜ å°„åˆ°æœ¬åœ°ï¼Œå‰ç«¯å°±å¯ä»¥é€šè¿‡æœ¬åœ°ç«¯å£è®¿é—®åç«¯ã€‚

---

## æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ SSH éš§é“ï¼ˆæ¨èï¼‰

### æ­¥éª¤ 1ï¼šå»ºç«‹ SSH éš§é“

åœ¨æœ¬åœ° PowerShell ä¸­æ‰§è¡Œï¼š

```powershell
# å»ºç«‹ SSH éš§é“ï¼šå°†è¿œç¨‹ 8108 ç«¯å£æ˜ å°„åˆ°æœ¬åœ° 8108 ç«¯å£
ssh -J z135 -L 8108:127.0.0.1:8108 -p 1022 ls@10.181.142.180

# æˆ–è€…ä½¿ç”¨å®Œæ•´å‘½ä»¤
ssh -J zhaoyk@10.181.9.135 -L 8108:127.0.0.1:8108 -p 1022 ls@10.181.142.180
```

**å‚æ•°è¯´æ˜**ï¼š
- `-J z135`: é€šè¿‡è·³æ¿æœº z135 è¿æ¥ï¼ˆä½¿ç”¨ä½ çš„ SSH é…ç½®ï¼‰
- `-L 8108:127.0.0.1:8108`: æœ¬åœ°ç«¯å£è½¬å‘
  - æœ¬åœ° 8108 ç«¯å£ â†’ è¿œç¨‹æœåŠ¡å™¨çš„ 127.0.0.1:8108
- `-p 1022`: ç›®æ ‡æœåŠ¡å™¨çš„ SSH ç«¯å£

**è¾“å…¥å¯†ç **ï¼š
- è·³æ¿æœºå¯†ç ï¼ˆå¦‚æœéœ€è¦ï¼‰
- ç›®æ ‡æœåŠ¡å™¨å¯†ç ï¼š`camel`

### æ­¥éª¤ 2ï¼šä¿æŒéš§é“çª—å£æ‰“å¼€

âš ï¸ **é‡è¦**ï¼šè¿™ä¸ª PowerShell çª—å£å¿…é¡»ä¿æŒæ‰“å¼€ï¼Œå…³é—­çª—å£ä¼šæ–­å¼€éš§é“ã€‚

### æ­¥éª¤ 3ï¼šä¿®æ”¹å‰ç«¯é…ç½®

ä¿®æ”¹ `vis/vite.config.js`ï¼š

```javascript
export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      "@": fileURLToPath(new URL("./src", import.meta.url)),
    },
  },
  server: {
    host: "127.0.0.1",
    port: 8080,
    proxy: {
      "/api": {
        target: "http://127.0.0.1:8108",  // é€šè¿‡æœ¬åœ°éš§é“è®¿é—®
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, ""),
      },
    },
  },
});
```

### æ­¥éª¤ 4ï¼šå¯åŠ¨å‰ç«¯

```powershell
cd vis
npm run dev
```

### æ­¥éª¤ 5ï¼šè®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://127.0.0.1:8080`

---

## æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ SSH é…ç½®æ–‡ä»¶ï¼ˆæ›´ä¼˜é›…ï¼‰

### æ­¥éª¤ 1ï¼šé…ç½® SSH Config

ç¼–è¾‘ `C:\Users\nyodo\.ssh\config`ï¼Œæ·»åŠ ï¼š

```
# è·³æ¿æœºé…ç½®ï¼ˆå·²æœ‰ï¼‰
Host z135
    User zhaoyk
    HostName 10.181.9.135
    IdentityFile "C:\Users\nyodo\.ssh\id_rsa_zhaoyk"

# ç›®æ ‡æœåŠ¡å™¨é…ç½®ï¼ˆé€šè¿‡è·³æ¿æœºï¼‰
Host hpc-server
    User ls
    HostName 10.181.142.180
    Port 1022
    ProxyJump z135
    # å¦‚æœéœ€è¦å¯†ç ï¼Œå¯ä»¥æ·»åŠ 
    # PreferredAuthentications password
```

### æ­¥éª¤ 2ï¼šä½¿ç”¨ç®€åŒ–å‘½ä»¤å»ºç«‹éš§é“

```powershell
# ç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ«å
ssh -L 8108:127.0.0.1:8108 hpc-server
```

### æ­¥éª¤ 3ï¼šåˆ›å»ºä¾¿æ·è„šæœ¬

åˆ›å»º `visualtool-backend/å»ºç«‹SSHéš§é“-è·³æ¿æœº.ps1`ï¼š

```powershell
# SSH éš§é“è„šæœ¬ï¼ˆé€šè¿‡è·³æ¿æœºï¼‰
# ä½¿ç”¨æ–¹æ³•ï¼š.\å»ºç«‹SSHéš§é“-è·³æ¿æœº.ps1

$localPort = "8108"
$remoteHost = "127.0.0.1"
$remotePort = "8108"

Write-Host "========================================" -ForegroundColor Cyan
Write-Host "SSH éš§é“è¿æ¥ï¼ˆé€šè¿‡è·³æ¿æœºï¼‰" -ForegroundColor Green
Write-Host "========================================" -ForegroundColor Cyan
Write-Host ""
Write-Host "è·³æ¿æœº: z135 (10.181.9.135)" -ForegroundColor Yellow
Write-Host "ç›®æ ‡æœåŠ¡å™¨: 10.181.142.180:1022" -ForegroundColor Yellow
Write-Host "æœ¬åœ°ç«¯å£: $localPort" -ForegroundColor Yellow
Write-Host "è¿œç¨‹ç«¯å£: $remotePort" -ForegroundColor Yellow
Write-Host ""
Write-Host "æ­£åœ¨å»ºç«‹ SSH éš§é“..." -ForegroundColor Green
Write-Host "æç¤ºï¼šè¾“å…¥å¯†ç åï¼Œæ­¤çª—å£éœ€è¦ä¿æŒæ‰“å¼€" -ForegroundColor Yellow
Write-Host "å…³é—­æ­¤çª—å£å°†æ–­å¼€éš§é“è¿æ¥" -ForegroundColor Red
Write-Host ""
Write-Host "å»ºç«‹æˆåŠŸåï¼Œå‰ç«¯å¯ä»¥è®¿é—®ï¼š" -ForegroundColor Cyan
Write-Host "  http://127.0.0.1:8080" -ForegroundColor White
Write-Host ""
Write-Host "æŒ‰ Ctrl+C å¯ä»¥æ–­å¼€è¿æ¥" -ForegroundColor Gray
Write-Host "========================================" -ForegroundColor Cyan
Write-Host ""

# ä½¿ç”¨ SSH é…ç½®ä¸­çš„åˆ«å
ssh -L ${localPort}:${remoteHost}:${remotePort} hpc-server

Write-Host ""
Write-Host "SSH éš§é“å·²æ–­å¼€" -ForegroundColor Red
```

---

## æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨ AutoSSHï¼ˆè‡ªåŠ¨é‡è¿ï¼‰

å¦‚æœæ‹…å¿ƒéš§é“æ–­å¼€ï¼Œå¯ä»¥ä½¿ç”¨ AutoSSHï¼ˆéœ€è¦å®‰è£…ï¼‰ã€‚

### Windows å®‰è£… AutoSSH

```powershell
# ä½¿ç”¨ Chocolatey å®‰è£…
choco install autossh

# æˆ–ä¸‹è½½ï¼šhttps://www.harding.motd.ca/autossh/
```

### ä½¿ç”¨ AutoSSH

```powershell
autossh -M 20000 -J z135 -L 8108:127.0.0.1:8108 -p 1022 ls@10.181.142.180
```

**å‚æ•°è¯´æ˜**ï¼š
- `-M 20000`: ç›‘æ§ç«¯å£ï¼Œç”¨äºè‡ªåŠ¨é‡è¿
- å…¶ä»–å‚æ•°ä¸æ™®é€š SSH ç›¸åŒ

---

## æ–¹æ¡ˆå››ï¼šæ•°æ®åº“è¿æ¥ï¼ˆNavicatï¼‰

### å»ºç«‹æ•°æ®åº“ SSH éš§é“

```powershell
# å»ºç«‹æ•°æ®åº“éš§é“ï¼šæœ¬åœ° 3307 â†’ è¿œç¨‹ 3306
ssh -J z135 -L 3307:127.0.0.1:3306 -p 1022 ls@10.181.142.180
```

### Navicat é…ç½®

1. **å¸¸è§„é€‰é¡¹å¡**ï¼š
   - ä¸»æœºï¼š`127.0.0.1`
   - ç«¯å£ï¼š`3307`ï¼ˆæ³¨æ„æ˜¯ 3307ï¼Œä¸æ˜¯ 3306ï¼‰
   - ç”¨æˆ·åï¼š`root`
   - å¯†ç ï¼š`123456`

2. **SSH é€‰é¡¹å¡**ï¼š
   - å‹¾é€‰"ä½¿ç”¨SSHéš§é“"
   - SSHä¸»æœºï¼š`10.181.9.135`ï¼ˆè·³æ¿æœºï¼‰
   - SSHç«¯å£ï¼š`22`
   - SSHç”¨æˆ·åï¼š`zhaoyk`
   - SSHå¯†ç /å¯†é’¥ï¼šä½¿ç”¨ä½ çš„ SSH å¯†é’¥
   - æˆ–è€…ä¸å‹¾é€‰ SSH éš§é“ï¼Œç›´æ¥ä½¿ç”¨æœ¬åœ° 3307 ç«¯å£ï¼ˆå› ä¸ºå·²ç»å»ºç«‹äº†éš§é“ï¼‰

---

## å®Œæ•´å·¥ä½œæµç¨‹

### 1. å¯åŠ¨ SSH éš§é“ï¼ˆåç«¯ï¼‰

```powershell
# æ‰“å¼€ PowerShell çª—å£ 1
cd visualtool-backend
.\å»ºç«‹SSHéš§é“-è·³æ¿æœº.ps1
# æˆ–æ‰‹åŠ¨æ‰§è¡Œï¼š
ssh -J z135 -L 8108:127.0.0.1:8108 -p 1022 ls@10.181.142.180
```

### 2. å¯åŠ¨ SSH éš§é“ï¼ˆæ•°æ®åº“ï¼Œå¯é€‰ï¼‰

```powershell
# æ‰“å¼€ PowerShell çª—å£ 2ï¼ˆå¦‚æœéœ€è¦è¿æ¥æ•°æ®åº“ï¼‰
ssh -J z135 -L 3307:127.0.0.1:3306 -p 1022 ls@10.181.142.180
```

### 3. å¯åŠ¨å‰ç«¯

```powershell
# æ‰“å¼€ PowerShell çª—å£ 3
cd vis
npm run dev
```

### 4. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨ï¼š`http://127.0.0.1:8080`

---

## åˆ›å»ºä¾¿æ·è„šæœ¬

è®©æˆ‘ä¸ºä½ åˆ›å»ºå‡ ä¸ªä¾¿æ·è„šæœ¬ï¼š
